<html>
<head>
    <meta charset="utf-8">
    <title>我的电力时装秀</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="screen-orientation" content="portrait">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>

    <link type="text/css" rel="stylesheet" href="../css/style.css">
    <script type="text/javascript" src="../js/jquery.2.1.1.min.js"></script>
    <script type="text/javascript" src="../js/jquery.transit.min.js"></script>
    <script type="text/javascript" src="../js/jquery.easing.min.js"></script>
    <script type="text/javascript" src="../js/jQueryRotate.2.2.js"></script>
    <script type="text/javascript" src="../js/loader.js"></script>
    <script type="text/javascript" src="../js/init.js"></script>
    <script type="text/javascript" src="../js/iscroll-lite.js"></script>
    <script type="text/javascript" src="../js/main.js"></script>
</head>
<body style="">

<div class="app">

    <section class="load" style="display: none; opacity: 0;">
        <center><figure></figure><h6>Loading<q><span>···</span></q></h6></center>
    </section>

    <section class="s1" style="display: none; opacity: 0;">
        <h2><i></i></h2>
        <center>
            <h3><a></a><a></a></h3>
            <p>选择性别即刻开始换装哦</p>
            <h4><a>开始换装</a></h4>
            <h4><a>表白爱能量报名</a></h4>
        </center>
        <div class="lottery-access">
            <i></i>
            <p>幸运抽奖</p>
        </div>
    </section>

    <section class="s2" style="display: none; opacity: 0;">
        <h3></h3>
        <figure>
            <p class="body"></p>
            <p class="item3"></p>
            <p class="item4"></p>
            <p class="item2"></p>
            <p class="item1"></p>
            <p class="item5"></p>
        </figure>
        <footer><a class="btn1">返回</a><a class="btn2">背景选择</a></footer>
        <ol>
            <li><a>发型</a></li>
            <li><a>上装</a></li>
            <li><a>下装</a></li>
            <li><a>鞋</a></li>
            <li><a>配饰</a></li>
        </ol>
        <menu style="touch-action: none;">
            <div
                style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px);"></div>
        </menu>
    </section>

    <section class="s3">
        <header><a>人物服饰</a></header>
        <figure>
            <p class="bg"></p>
            <p class="role"></p>
            <p class="title"></p>
            <p class="ewm"></p>
            <p class="name"><span><big><font></font>/是我</big><br><small>我是<font></font></small></span></p>
        </figure>
        <footer>
            <h3><a>生成<br>海报</a></h3>
            <menu style="touch-action: none;">
                <div
                    style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px);"></div>
            </menu>
        </footer>
        <center>
            <div>
                <p><input type="text" maxlength="6" placeholder="白天站到晚上">/是我</p>
                <p>我是<input type="text" maxlength="6" placeholder="强壮草莓星人"></p>
                <a>完成</a>
            </div>
        </center>
    </section>

    <section class="s4">
        <figure></figure>
        <footer><a class="btn6">返回编辑</a><a class="btn4">生成头像</a><a class="btn3">长按保存</a><a class="btn5">分享</a></footer>
    </section>

    <section class="s5">
        <figure></figure>
        <footer><a class="btn1">返回</a><a class="btn3">长按保存</a><a class="btn5">分享</a></footer>
    </section>

    <section class="share">
        <center></center>
    </section>

    <section class="lottery" style="display: block; opacity: 1;">
        <div>
            <div class="lottery-title">
                <i></i>
                <p>你还有<span class="lottery-title-dark">1</span>次抽奖机会</p>
                <small>每分享 1 次，可额外获得 1 次抽奖机会</small>
            </div>
            <div class="lottery-plate">
                <div class="rotate-bg"></div>
                <div class="lottery-star"><img src="../img/lottery-btn.png" id="lotteryBtn"></div>
            </div>
            <div class="lottery-buttons">
                <a class="back-button" href="#"><i></i>返回首页</a>
                <a href="#">我的奖品</a>
            </div>
        </div>
    </section>

</div>


<!--<div class="debug">debug</div>-->

</body>
</html>

<script>
    $(function(){
        var timeOut = function(){  //超时函数
            $("#lotteryBtn").rotate({
                angle:0,
                duration: 10000,
                animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的
                callback:function(){
                    alert('网络超时')
                }
            });
        };
        var rotateFunc = function(awards,angle,text){  //awards:奖项，angle:奖项对应的角度
            $('#lotteryBtn').stopRotate();
            $("#lotteryBtn").rotate({
                angle:0,
                duration: 5000,
                animateTo: angle+1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^
                callback:function(){
                    alert(text)
                }
            });
        };

        $("#lotteryBtn").rotate({
            bind:
                {
                    click: function(){
                        var time = [0,1];
                        time = time[Math.floor(Math.random()*time.length)];
                        if(time==0){
                            timeOut(); //网络超时
                        }
                        if(time==1){
                            var data = [1,2,3,0]; //返回的数组
                            data = data[Math.floor(Math.random()*data.length)];
                            if(data==1){
                                rotateFunc(1,157,'恭喜您抽中的一等奖')
                            }
                            if(data==2){
                                rotateFunc(2,247,'恭喜您抽中的二等奖')
                            }
                            if(data==3){
                                rotateFunc(3,22,'恭喜您抽中的三等奖')
                            }
                            if(data==0){
                                var angle = [67,112,202,292,337];
                                angle = angle[Math.floor(Math.random()*angle.length)]
                                rotateFunc(0,angle,'很遗憾，这次您未抽中奖')
                            }
                        }
                    }
                }

        });

    })
</script>